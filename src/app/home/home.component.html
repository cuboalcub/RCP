<body class="h-full w-full bg-gray-100 pt-20">
    <div class="container mx-auto p-4">
        <!-- Barra superior -->
        <div class="fixed top-0 left-0 w-full bg-gradient-to-r from-purple-500 to-green-500 p-4 flex items-center justify-center border-b-2 border-black z-10 h-20">
            <img src="https://firebasestorage.googleapis.com/v0/b/roaau-javascript.appspot.com/o/imagenes%2Fcanvas.png?alt=media&token=266cc22d-53b5-44f8-963d-0a0ab0e556cb" alt="Logo" class="h-16">
          </div>

          <div class="flex w-full justify-between items-center mt-5 mb-5">
            <!-- Botón Agregar -->
            
                <a href="create-table"><button
                    class="w-12 h-12 rounded-full border-1 border-gray-200 shadow-md bg-blue-500 hover:bg-blue-700 text-white font-bold flex items-center justify-center"
                    aria-label="Agregar">
                    +
                </button></a>
            
        
            <!-- Menú Usuario -->
            
            <div class="relative inline-block">
                <button 
                    (click)="toggleMenu($event)"
                    class="w-12 h-12 rounded-full border-2 border-gray-200 shadow-md bg-cover bg-center"
                    [style.background-image]="'url(https://firebasestorage.googleapis.com/v0/b/roaau-javascript.appspot.com/o/imagenes%2Fimages-removebg-preview.png?alt=media&token=b3c8b16c-332f-49af-8048-df25b6865ef8)'"
                    aria-label="Ícono de usuario"
                    id="userButton">
                </button>
                <div *ngIf="menuVisible" class="absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg" id="logoutMenu">
                    <a href="create-table"> <button class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100" (click)="logOut()">LogOut</button></a>
                </div>
            </div>
           
        </div>

    <h1 class="text-3xl font-bold mb-4 text-center mt-0 mb-5    ">Tabla de Proyectos</h1>

        <div class="overflow-y-auto max-h-96">

        <table class="min-w-full border">
            <thead class="bg-gray-50 sticky top-0">
                <tr>
                    <th class="px-6 py-3 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">Nombre</th>
                    <th class="px-6 py-3 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">Óptimo</th>
                    <th class="px-6 py-3 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">Probable</th>
                    <th class="px-6 py-3 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">Pésimo</th>
                    <th class="px-6 py-3 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">Ver</th>
                    <th class="px-6 py-3 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">Editar</th>
                    <th class="px-6 py-3 text-left text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider">Eliminar</th>
                </tr>
            </thead>
            
            <tbody>
                <tr *ngFor="let elemento of datosTabla">
                    <td class="px-6 py-4 whitespace-nowrap">{{elemento.nombre}} </td>
                    <td class="px-6 py-4 whitespace-nowrap">{{elemento.optimo}}</td>
                    <td class="px-6 py-4 whitespace-nowrap">{{elemento.probable}}</td>
                    <td class="px-6 py-4 whitespace-nowrap">{{elemento.pesimo}}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-center">
                        <a href="ruta"><button><img src="https://firebasestorage.googleapis.com/v0/b/roaau-javascript.appspot.com/o/imagenes%2FSin_t%C3%ADtulo-removebg-preview.png?alt=media&token=153df1b3-f650-4ab6-92b4-4c189070cc61" alt="Icono de ojo" alt="Icono de ojo" class="w-12 h-12"></button></a>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-center">
                        <a href="edit-table"><button><img src="https://firebasestorage.googleapis.com/v0/b/roaau-javascript.appspot.com/o/imagenes%2Fimagsadasdaes-removebg-preview.png?alt=media&token=52f90d4d-7b13-4a28-a0ba-7b3d6321c3de" alt="Icono de lápiz" class="w-10 h-10"></button></a>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-center">
                        <button class="deleteButton"
                        (click)="eliminarElemento(elemento)"
                        >
                            <img src="https://firebasestorage.googleapis.com/v0/b/roaau-javascript.appspot.com/o/imagenes%2Fimages__1_-removebg-preview.png?alt=media&token=3311f0b0-3a71-43b0-993b-6c8236c991ed" alt="Icono de eliminar" class="w-10 h-10">
                        </button>
                    </td>
                </tr>

             

                

               
            </tbody>
        </table>
    </div>
    </div>

    <script>

document.addEventListener("DOMContentLoaded", function() {
        // Usamos delegación de eventos para manejar clics en botones de eliminar
        const tableBody = document.querySelector("tbody"); // Selecciona el tbody donde están las filas

        tableBody.addEventListener("click", function(event) {
            if (event.target.closest(".deleteButton")) {
                // Encuentra la fila (tr) más cercana al botón y la elimina
                const row = event.target.closest("tr");
                if (row) {
                    row.remove();
                }
            }
        });
    });


        document.getElementById("userButton").addEventListener("click", function(event) {
            event.preventDefault(); // Prevenir comportamiento predeterminado
            document.getElementById("logoutMenu").classList.toggle("hidden");
        });
    
        document.addEventListener("click", function(event) {
            const userButton = document.getElementById("userButton");
            const logoutMenu = document.getElementById("logoutMenu");
    
            if (!userButton.contains(event.target) && !logoutMenu.contains(event.target)) {
                logoutMenu.classList.add("hidden");
            }
        });
    </script>
    
    
</body>